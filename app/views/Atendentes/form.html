#{extends 'main.html' /} #{if paciente} #{set title:'CNM - Edição de
Atendente' /} #{/if} #{else} #{set title:'CNM - Cadastro de Atendente'
/} #{/else}

<!-- bootstrap-->
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

<link rel="stylesheet" media="screen"
	href="@{'/public/stylesheets/lista_all.css'}">

<body class="body">

	<div class="cont-det">
		<br> <br>
		<h1 class="cads">Preencha a ficha:</h1>
		<hr>
		<form action="@{Atendentes.cadastrar}" method="post">
			<input type="hidden" name="atendente.id" value="${atendente?.id}" />

			<label for="exampleInput">Nome:</label> <input type="text"
				class="form-control" value="${atendente?.nome}"
				name="atendente.nome" placeholder="Nome do atendente"> <br>

			<label for="exampleInput">Email:</label> <input type="text"
				name="atendente.email" class="form-control"
				value="${atendente?.email}" placeholder="Email válido"> <br>

			<!-- senha com icon do bootstrap -->
			<label for="senha">Senha</label>
			<div class="input-with-icon">
				<input type="password" class="form-control" id="senha"
					name="atendente.senha" value="${atendente?.senha}"
					placeholder="Senha" autocomplete="new-password"> <i
					id="toggleSenha" class="bi bi-eye-slash toggle-password"
					role="button" aria-label="Mostrar senha" aria-pressed="false"
					tabindex="0"></i>
			</div>
			<br> <input type="submit" value="Cadastrar" class="botao">
		</form>

		<a href="@{Administradores.menu}"> <br>
			<button class="botao">Voltar</button>
		</a>
	</div>

	<!-- script do ícone da senha -->
	<script>
    document.addEventListener('DOMContentLoaded', function () {
      const inputSenha = document.getElementById('senha');
      const toggle = document.getElementById('toggleSenha');

      if (!inputSenha || !toggle) return;

      function setIcon(isVisible) {
        if (isVisible) {
          toggle.classList.remove('bi-eye-slash');
          toggle.classList.add('bi-eye');
          toggle.setAttribute('aria-pressed', 'true');
          toggle.setAttribute('aria-label', 'Ocultar senha');
        } else {
          toggle.classList.remove('bi-eye');
          toggle.classList.add('bi-eye-slash');
          toggle.setAttribute('aria-pressed', 'false');
          toggle.setAttribute('aria-label', 'Mostrar senha');
        }
      }

      function toggleSenha() {
        const isPassword = inputSenha.getAttribute('type') === 'password';
        inputSenha.setAttribute('type', isPassword ? 'text' : 'password');
        setIcon(isPassword);
      }

      toggle.addEventListener('click', toggleSenha);

      toggle.addEventListener('keydown', function (e) {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          toggleSenha();
        }
      });

      setIcon(false);
    });
    </script>

</body>
